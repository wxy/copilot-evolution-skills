---
name: _instruction-guard
description: 强制在每次回复前读取项目指令文件，避免遗漏规范。与 _context-ack 配合，仅负责“读取约束”，不负责输出格式。
---

# _instruction-guard

## 目标
强制在每次回复前**显式读取**项目指令文件，避免因“默认记忆”导致规范遗漏。

## 适用范围
- **所有对话**与**所有回复**。
- 任何需要产出说明、修改代码、运行命令、做判断的回复前都必须执行。

## 必须遵循的流程
1. **读取指令文件**：
   - 必读：`.github/copilot-instructions.md`
   - 若会话中出现其他指令文件（如技能文件、策略文件），也应显式读取。
2. **确认读取**：在 _context-ack 的“已读指令”中体现该指令文件。
3. **再输出回复**：完成读取后再生成最终回复。

## 强制校验（阻断式）
- 若本次回复前**未显式读取** `.github/copilot-instructions.md`，必须先读取后再输出。
- 不允许以“上下文已包含”为理由跳过读取。

## 禁止事项
- 不得依赖“已有上下文”而跳过读取。
- 不得以“已读过”为理由省略读取。

## 检查清单
- [ ] 是否在本次回复前读取 `.github/copilot-instructions.md`？
- [ ] 是否将其列入 _context-ack 的“已读指令”？
- [ ] 是否还有其他应读的指令文件未读取？

## 与 _context-ack 的关系
- _instruction-guard 只负责**强制读取**。
- _context-ack 负责**展示已读指令/已启用技能/仓库状态**。
